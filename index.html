<!DOCTYPE html>
<html lang="ja">
  <!DOCTYPE html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>嫁ブロック</title>
    <link rel="icon" href="" id="favicon" />

    <!-- twitter card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta property="og:title" content="嫁ブロックを避けるゲーム" />
    <meta property="og:description" content="脱走するアプリです" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167504188-1"></script>
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      gtag('js', new Date())
      gtag('config', 'UA-167504188-1')
    </script>
  </head>
  <body>
    <!-- ボタン -->
    <div class="container">
      <div id="buttons">
        <dvi class="btn btn--orange">連打して！！<br /></dvi>
      </div>
    </div>
    <div class="main">
      <div class="ojiImg">
        <img id="oji" class="img-fluid" src="images/ojisan.png" />
      </div>
      <div class="yomeImg">
        <img id="yome" class="img-fluid" src="images/yome.png" />
      </div>
      <div class="blockImgAbove">
        <img id="blockAbove" class="img-fluid" src="images/block.jpg" />
      </div>
      <div class="blockImgSecond">
        <img id="blockSecond" class="img-fluid" src="images/block.jpg" />
      </div>
      <div class="blockImgThird">
        <img id="blockThird" class="img-fluid" src="images/block.jpg" />
      </div>
      <div class="blockImgFourth">
        <img id="blockFourh" class="img-fluid" src="images/block.jpg" />
      </div>
      <div class="kadenImg">
        <img id="kaden" src="images/kaden.png" />
      </div>
      <div class="staffImg">
        <img id="staff" src="images/staff.png" />
      </div>
    </div>

    <script>
      // みたらしくんを1秒後に1秒かけて座標(500, 150)へアニメーションさせる
      animateTranslate('oji', 10000, -800, 0, 1000)
      /**
       * 対象オブジェクトをアニメーションして移動。
       * @param {string} targetID スクロール時間のミリ秒。
       * @param {number} time アニメーションさせる時間（ミリ秒）。
       * @param {number} endX X座標の目標値。
       * @param {number} endY Y座標の目標値。
       * @param {number} delay アニメーションを開始するまでの遅延時間です（ミリ秒）。
       */
      function animateTranslate(targetID, time, endX, endY, delay) {
        const target = document.getElementById(targetID) // アニメーションの対象
        const style = getComputedStyle(target) // 対象のスタイルを取得
        const reg = /matrix\((.*)\)/ // 不要な文字列を取り除くための正規表現
        const transform = style.transform.match(reg)[1].split(',') // transform を配列として取得
        const startX = parseFloat(transform[4]) // X座標の始点
        const startY = parseFloat(transform[5]) // Y座標の始点
        const diffX = endX - startX // X座標の変化量
        const diffY = endY - startY // Y座標の変化量
        let progress = 0

        // アップデートを実行する
        requestAnimationFrame(update)

        function update(timestamp) {
          // 遅延時間を含めた進捗率を算出
          progress = (timestamp - delay) / time

          // 進捗率が100%を超えないよう丸める
          progress = Math.min(progress, 1)

          // 進捗率がプラスの場合のみ値を算出し反映する
          if (progress >= 0) {
            const resultX = startX + diffX * progress // X座標
            const resultY = startY + diffY * progress // Y座標
            target.style.transform = `translate( ${resultX}px, ${resultY}px )`
          }

          // 進捗が1未満の場合はアップデートを再実行する
          if (progress < 1) {
            requestAnimationFrame(update)
          }
        }
      }

      // import Swal from 'sweetalert2'

      // const state = { count: 0 }

      // Swal.fire({
      //   text: '10秒間、下のボタンを連打してかき氷を高く積み上げましょう！',
      //   icon: 'warning',
      //   confirmButtonText: 'スタート',
      // }).then(() => {
      //   countdown(3000, '#countdown')
      // })

      // function countdown(setTime, id) {
      //   let totalTime = setTime
      //   // 読み込まれた最初の時間
      //   const oldTime = Date.now()
      //   // タイマーをセット
      //   const timeId = setInterval(() => {
      //     // 読み込まれ続ける時間
      //     const currentTime = Date.now()

      //     const diff = currentTime - oldTime
      //     const diffSec = totalTime - diff
      //     // Math.ceil()関数は引数として与えた数以上の最小の整数を返す
      //     const remainSec = Math.ceil(diffSec / 1000)
      //     let text = `<div class="countdown-number">${remainSec}</div>`

      //     if (diffSec <= 0) {
      //       clearInterval(timeId)
      //       text = `<div class="start-fadeout">スタート</div>`
      //       countdownSec(10000, '#sec')
      //     }
      //     document.querySelector(id).innerHTML = text
      //   })
      // }

      // function countdownSec(setTime, id) {
      //   let totalTime = setTime
      //   const oldTime = Date.now()

      //   const timeId = setInterval(() => {
      //     const currentTime = Date.now()

      //     const diff = currentTime - oldTime
      //     const diffSec = totalTime - diff

      //     const remainSec = Math.ceil(diffSec / 1000)
      //     let text = `残り${remainSec}秒`

      //     const clickButton = document.querySelector('.click-button')
      //     clickButton.addEventListener('click', clickFrequency)

      //     if (diffSec <= 0) {
      //       clearInterval(timeId)
      //       text = '終了'
      //       clickButton.style['pointer-events'] = 'none'

      //       const btn = document.getElementById('press-button')
      //       const score = btn.innerHTML
      //       sessionStorage.setItem('userScore', score)

      //       setTimeout(resultPage, 2000)
      //     }
      //     document.querySelector(id).innerHTML = text
      //   })
      // }

      // function clickFrequency() {
      //   const counter = document.querySelector('#press-button')
      //   counter.innerHTML = ++state.count

      //   if (counter.innerHTML == 10) {
      //     const tsuika10 = document.querySelector('.tsuika10')
      //     tsuika10.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 20) {
      //     const tsuika20 = document.querySelector('.tsuika20')
      //     tsuika20.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 30) {
      //     const tsuika30 = document.querySelector('.tsuika30')
      //     tsuika30.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 40) {
      //     const tsuika40 = document.querySelector('.tsuika40')
      //     tsuika40.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 50) {
      //     const tsuika50 = document.querySelector('.tsuika50')
      //     tsuika50.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 60) {
      //     const tsuika60 = document.querySelector('.tsuika60')
      //     tsuika60.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 70) {
      //     const tsuika70 = document.querySelector('.tsuika70')
      //     tsuika70.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 80) {
      //     const tsuika80 = document.querySelector('.tsuika80')
      //     tsuika80.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 90) {
      //     const tsuika90 = document.querySelector('.tsuika90')
      //     tsuika90.style.display = 'block'
      //   }

      //   if (counter.innerHTML == 100) {
      //     const tsuika100 = document.querySelector('.tsuika100')
      //     tsuika100.style.display = 'block'
      //   }
      // }

      // function resultPage() {
      //   window.location.href = location.origin + '/result'
      // }
    </script>
  </body>
</html>
